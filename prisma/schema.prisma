// 任务管理系统数据库模型定义
// 使用SQLite作为数据库，位于dev.db文件

// 数据源配置
// provider: 数据库类型 - SQLite
// url: 数据库文件路径
datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

// Prisma客户端配置
// provider: 生成的客户端类型
// output: 客户端代码输出路径
generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}



// 用户表模型
// 存储系统用户信息，支持任务管理功能
model User {
  // 用户唯一标识符，使用cuid自动生成
  id        String   @id @default(cuid())
  // 用户邮箱，唯一约束
  email     String   @unique
  // 用户姓名
  name      String
  // 用户密码，加密存储
  password  String
  // 用户角色，默认为普通用户，预留管理员功能
  role      String   @default("USER")
  // 记录创建时间，自动生成
  createdAt DateTime @default(now())
  // 记录更新时间，自动更新
  updatedAt DateTime @updatedAt
  
  // 一对多关联关系：一个用户可以创建多个任务
  tasks     Task[]
  
  // 映射到数据库中的表名
  @@map("users")
}

// 任务状态枚举类型
// 定义任务的四种可能状态
enum TaskStatus {
  // pending: 待处理 - 任务已创建但尚未开始
  pending
  // in_progress: 进行中 - 任务正在执行
  in_progress
  // completed: 已完成 - 任务已成功完成
  completed
  // cancelled: 已取消 - 任务被终止执行
  cancelled
}

// 任务表模型
// 存储系统中的任务信息
model Task {
  // 任务唯一标识符，使用cuid自动生成
  id          String   @id @default(cuid())
  // 任务标题
  title       String
  // 任务描述，可选字段
  description String?
  // 任务优先级，默认中等优先级
  // 可选值：low（低）, medium（中）, high（高）, urgent（紧急）
  priority    String   @default("medium")
  // 任务状态，使用TaskStatus枚举类型，默认待处理
  status      TaskStatus   @default(pending)
  // 任务截止日期，可选字段
  dueDate     DateTime?
  // 任务创建时间，自动生成
  createdAt   DateTime @default(now())
  // 任务更新时间，自动更新
  updatedAt   DateTime @updatedAt
  
  // 多对一关联关系：多个任务可以属于一个创建者
  creator     User     @relation(fields: [creatorId], references: [id])
  // 创建者ID，外键关联User表
  creatorId   String
  
  // 映射到数据库中的表名
  @@map("tasks")
}
